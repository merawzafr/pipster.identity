# ====================================
# Pipster Identity Server - Environment Variables
# ====================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ====================================

# -------------------------------------
# Environment Configuration
# -------------------------------------
ASPNETCORE_ENVIRONMENT=Development
# Options: Development, Staging, Production

# -------------------------------------
# PostgreSQL Database
# -------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=pipster_identity_dev

# Database connection for Identity Server
DB_HOST=postgres
DB_PORT=5432
DB_NAME=pipster_identity_dev
DB_USERNAME=postgres
DB_PASSWORD=your_secure_password_here

# -------------------------------------
# IdentityServer Configuration
# -------------------------------------
# Public URL where IdentityServer is accessible
IDENTITYSERVER_ISSUER_URI=http://localhost:5000
# IDENTITYSERVER_ISSUER_URI=https://identity.pipster.app  # Production

# Optional: Override public origin if behind reverse proxy
# IDENTITYSERVER_PUBLIC_ORIGIN=https://identity.pipster.app

# -------------------------------------
# Application Ports
# -------------------------------------
# External port mapping (host:container)
IDENTITY_HTTP_PORT=5000
POSTGRES_PORT=5432

# -------------------------------------
# Security & Secrets
# -------------------------------------
# Generate secure random strings for production
# Use: openssl rand -base64 32

# JWT Signing Key (required in production)
# JWT_SIGNING_KEY=your_256_bit_secret_key_here

# Data Protection Key (required in production)
# DATA_PROTECTION_KEY=your_data_protection_key_here

# -------------------------------------
# Logging Configuration
# -------------------------------------
LOG_LEVEL=Information
# Options: Trace, Debug, Information, Warning, Error, Critical

# Microsoft/AspNetCore log level
LOG_LEVEL_MICROSOFT=Warning

# Duende IdentityServer log level
LOG_LEVEL_DUENDE=Information

# -------------------------------------
# Health Check Configuration
# -------------------------------------
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=60s

# -------------------------------------
# Docker Configuration
# -------------------------------------
# Restart policy
RESTART_POLICY=unless-stopped
# Options: no, always, on-failure, unless-stopped

# -------------------------------------
# Performance Tuning (Optional)
# -------------------------------------
# PostgreSQL connection pool
# DB_MAX_POOL_SIZE=100
# DB_MIN_POOL_SIZE=10
# DB_CONNECTION_LIFETIME=300

# -------------------------------------
# Development Settings
# -------------------------------------
# Set to true to enable detailed error pages
DEVELOPMENT_DETAILED_ERRORS=true

# Set to true to run migrations on startup
AUTO_MIGRATE_DATABASE=true

# -------------------------------------
# Production Settings (uncomment for prod)
# -------------------------------------
# ASPNETCORE_ENVIRONMENT=Production
# IDENTITYSERVER_ISSUER_URI=https://identity.pipster.app
# LOG_LEVEL=Warning
# AUTO_MIGRATE_DATABASE=false
# Ensure all secrets are set via Azure Key Vault or secure storage